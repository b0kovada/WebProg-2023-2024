<h2>Kurzus szerkesztése</h2>
<form id="editCourseForm" style="display:none;">
    <input type="hidden" id="editCourseId">
    <input type="text" id="editCourseName" placeholder="Új kurzus neve" required>
    <button type="submit">Kurzus módosítása</button>
</form>


function loadCourses() {
    fetch('https://vvri.pythonanywhere.com/api/courses')
        .then(response => response.json())
        .then(data => {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            data.forEach(course => {
                const li = document.createElement('li');
                li.textContent = course.name + " ";

                const editBtn = document.createElement('button');
                editBtn.textContent = 'Szerkeszt';
                editBtn.onclick = function() { showEditCourseForm(course.id, course.name); };
                li.appendChild(editBtn);

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Törlés';
                deleteBtn.onclick = function() { deleteCourse(course.id); };
                li.appendChild(deleteBtn);

                courseList.appendChild(li);
            });
        }).catch(error => console.error('Hiba:', error));
}

function showEditCourseForm(courseId, courseName) {
    const form = document.getElementById('editCourseForm');
    form.style.display = 'block';
    const editCourseId = document.getElementById('editCourseId');
    const editCourseName = document.getElementById('editCourseName');
    editCourseId.value = courseId;
    editCourseName.value = courseName;
}

document.getElementById('editCourseForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const courseId = document.getElementById('editCourseId').value;
    const courseName = document.getElementById('editCourseName').value;
    updateCourse(courseId, courseName);
});

function updateCourse(courseId, newName) {
    fetch(`https://vvri.pythonanywhere.com/api/courses/${courseId}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name: newName })
    }).then(response => response.json())
      .then(data => {
          console.log('Kurzus módosítva:', data);
          loadCourses();
      }).catch(error => console.error('Hiba a kurzus frissítésekor:', error));
}