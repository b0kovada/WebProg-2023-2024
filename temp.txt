<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Kurzusok és Diákok Kezelése</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        form, ul { margin-top: 20px; }
        li { margin-bottom: 5px; }
        input, button { margin-top: 10px; padding: 10px; }
        button { cursor: pointer; }
        #editStudentForm { background-color: #f0f0f0; padding: 20px; }
    </style>
</head>
<body>
    <h1>Kurzusok</h1>
    <ul id="courseList"></ul>
    <h2>Új kurzus hozzáadása</h2>
    <form id="newCourseForm">
        <input type="text" id="courseName" placeholder="Kurzus neve" required>
        <button type="submit">Kurzus hozzáadása</button>
    </form>

    <h1>Diákok</h1>
    <ul id="studentList"></ul>
    <h2>Új diák hozzáadása</h2>
    <form id="newStudentForm">
        <input type="text" id="studentName" placeholder="Diák neve" required>
        <input type="text" id="studentCourse" placeholder="Kurzus ID" required>
        <button type="submit">Diák hozzáadása</button>
    </form>

    <h2>Diák szerkesztése</h2>
    <form id="editStudentForm" style="display:none;">
        <input type="hidden" id="editStudentId">
        <input type="text" id="editStudentName" placeholder="Diák neve" required>
        <button type="submit">Diák módosítása</button>
    </form>

    <script src="scripts.js"></script>
</body>
</html>




document.getElementById('newCourseForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const courseName = document.getElementById('courseName').value;
    createCourse(courseName);
});

document.getElementById('newStudentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const studentName = document.getElementById('studentName').value;
    const studentCourse = document.getElementById('studentCourse').value;
    createStudent(studentName, studentCourse);
});

document.getElementById('editStudentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const studentId = document.getElementById('editStudentId').value;
    const studentName = document.getElementById('editStudentName').value;
    updateStudent(studentId, studentName);
});

function loadCourses() {
    fetch('https://vvri.pythonanywhere.com/api/courses')
        .then(response => response.json())
        .then(data => {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            data.forEach(course => {
                const li = document.createElement('li');
                li.textContent = course.name;
                courseList.appendChild(li);
            });
        }).catch(error => console.error('Hiba:', error));
}

function createCourse(name) {
    fetch('https://vvri.pythonanywhere.com/api/courses', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name })
    }).then(response => response.json())
      .then(data => {
          console.log('Kurzus hozzáadva:', data);
          loadCourses(); // Frissítsük a kurzusok listáját
      }).catch(error => console.error('Hiba:', error));
}

function loadStudents() {
    fetch('https://vvri.pythonanywhere.com/api/students')
        .then(response => response.json())
        .then(data => {
            const studentList = document.getElementById('studentList');
            studentList.innerHTML = '';
            data.forEach(student => {
                const li = document.createElement('li');
                li.textContent = `${student.name} (Kurzus ID: ${student.course_id})`;
                studentList.appendChild(li);
            });
        }).catch(error => console.error('Hiba:', error));
}

function createStudent(name, courseId) {
    fetch('https://vvri.pythonanywhere.com/api/students', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name, course_id: courseId })
    }).then(response => response.json())
      .then(data => {
          console.log('Diák hozzáadva:', data);
          loadStudents();
      }).catch(error => console.error('Hiba:', error));
}

function updateStudent(id, name) {
    fetch(`https://vvri.pythonanywhere.com/api/students/${id}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name })
    }).then(response => response.json())
      .then(data => {
          console.log('Diák módosítva:', data);
          loadStudents();
      }).catch(error => console.error('Hiba:', error));
}

loadCourses(); // Indításkor töltsük be a kurzusokat
loadStudents(); // Indításkor töltsük be a diákokat
